# General Context (functional):
We are building a new calculator API in GoLang. It is a stateless API used for robo-advisory. It takes an investment amount and splits it across financial products. FOr instance, if i am doing a topup of USD 100 into a portfolio that is 60% IVV and 40% AGG, it will split it as 2 buy orders to buy USD 60 worth of IVV and to buy USD 40 worth of AGG. Nevertheless, we want to optimise this process so that after investment the resulting portfolio will be as close its model portoflio's weights as possible. So the API will prioritise investing into the products that had a shortfall versus products that had a surplus versus model weights.
- You will find in this project folder, the JSON file smartordersplitter_test_input.json that contains the payloads of the test cases we want to use to test this API once it is coded. It contains test cases for "redemption" and "switch", which we will tacke together after "investment". Anyway, it gives you the structure of the input payload with decimal precisions for amounts and units, volatilityBuffer (just used for redemption, so you can forget about it for now), goalDetails with the current goal holdings and values (if any; it will be missing if it is a new goal), orderAmount, orderType (just "investment" for now), modelPortfolioDetails (object with the detail of the model portfolio attached to the goal). Notice that we want to have transactionFee per product (which applies to any type of order). We have potentially 8 minimum requirements, e.g. minHoldingAmt, which are product-level requirement, and tells us if any order is too small or too big to be processed: minInitialInvestmentAmt and minInitialInvestmentUnits apply to first time purchase of a product, minTopUpAmt and minTopUpUnits apply to subsequent purchase of a product, minRedemptionAmt and minRedemptionUnits apply to a redemption of a product, minHoldingAmt and minHoldingUnits apply to whatever is left after a partial redemption (some products does not allow to have a balance that falls below a certain amount or a certain number of units). Note that percentages are entered as decimal values, e.g. 0.01 means 1%.
- You will find in this project folder, the JSON file smartordersplitter_test_expected_output.json that gives you the format of the response payload that we are expecting. Just use this file for a referecen for the format of the response payload, not for anything else for now. For instance test 4 applies to an "investment". It also contains responses for other order types (redemption, switch), which you can disregard for now.

# prompt 20260220_1
Go through the general context above, which explains what we want to build. Don't start coding for now. Just tell me if you have a solution for the smart splitting of the order. I guess you need to have some optimisation logic since you need to make the resulting portoflio as close to the model weights as possible, but you also need to abide by the minimum requirements. You also need to take into account the transactionFee per product.
